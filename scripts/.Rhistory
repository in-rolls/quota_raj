library(here)
library(kableExtra)
# Load data
data_dir <- here("..", "data/sarpanch_election_data")
sp_fin_file <- here(data_dir, "sp_2005_2010_2015_2020_fin.csv")
raj_panch <- readr::read_csv(sp_fin_file)
tables_folder <- here("tables")
# Transition Matrces ------------------------------------------------------
trans_05_10 <- table(raj_panch$reservation_2005, raj_panch$reservation_2010)
trans_10_15 <- table(raj_panch$reservation_2010, raj_panch$reservation_2015)
trans_15_20 <- table(raj_panch$reservation_2015, raj_panch$reservation_2020)
# blank dataframe to store results
trans_matrices_store <- data.frame(
"Year Comparison" = c("2005-2010", "2010-2015", "2015-2020"),
"Transition Matrix" = c(
kable(trans_05_10, format = "latex", escape = FALSE, booktabs = TRUE),
kable(trans_10_15, format = "latex", escape = FALSE, booktabs = TRUE),
kable(trans_15_20, format = "latex", escape = FALSE, booktabs = TRUE)
)
)
# TeX export Beautify this later
trans_matrices_table <- trans_matrices_store %>%
kable("latex", escape = FALSE, booktabs = TRUE, caption = "Transition Matrices")
cat(trans_matrices_table, file = here("tables", "tran_matrices.tex"))
# Chi-Squared Test --------------------------------------------------------
chi_sq_test_05_10 <- chisq.test(trans_05_10, simulate.p.value = TRUE)
chi_sq_test_10_15 <- chisq.test(trans_10_15, simulate.p.value = TRUE)
chi_sq_test_15_20 <- chisq.test(trans_15_20, simulate.p.value = TRUE)
# blank dataframe to store results
results_store <- data.frame(
"Year Comparison" = c("2005-2010", "2010-2015", "2015-2020"),
"Chi-Squared Test Result" = c(
format(chi_sq_test_05_10$p.value, scientific = TRUE, digits = 2),
format(chi_sq_test_10_15$p.value, scientific = TRUE, digits = 2),
format(chi_sq_test_15_20$p.value, scientific = TRUE, digits = 2)
)
)
#teX export Beautify this later
chisq_table <- results_store %>%
kable("latex", escape = FALSE, booktabs = TRUE, caption = "Chi-Squared Test Results") %>%
kable_styling(full_width = FALSE, position = "center")
cat(chisq_table, file = here("tables", "chisq_table.tex"))
# Load libs
library(readr)
library(dplyr)
library(xtable)
library(fuzzyjoin)
library(stringr)
library(here)
library(kableExtra)
# Load data
data_dir <- here("..", "data/sarpanch_election_data")
sp_fin_file <- here(data_dir, "sp_2005_2010_2015_2020_fin.csv")
raj_panch <- readr::read_csv(sp_fin_file)
tables_folder <- here("tables")
names(raj_panch)
levels(raj_panch$reservation_2020)
unique(raj_panch$reservation_2020)
View(raj_panch)
unique(raj_panch$reservation_2005)
raj_panch$reservation_2005 == "ST W"),1,0)
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2005 <- ifelse((raj_panch$reservation_2005 == "GEN W" |
raj_panch$reservation_2005 == "OBC W" |
raj_panch$reservation_2005 == "SC W" |
raj_panch$reservation_2005 == "ST W"),1,0))
> unique(raj_panch$reservation_2010)
unique(raj_panch$reservation_2010)
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2010 <- ifelse((raj_panch$reservation_2005 == "GENW" |
raj_panch$reservation_2005 == "OBCW" |
raj_panch$reservation_2005 == "SCW" |
raj_panch$reservation_2005 == "STW"),1,0))
unique(raj_panch$reservation_2015)
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2015 <- ifelse((raj_panch$reservation_2005 == "General (Woman)" |
raj_panch$reservation_2005 == "OBC (Woman)" |
raj_panch$reservation_2005 == "SC (Woman)" |
raj_panch$reservation_2005 == "ST (Woman)"),1,0))
unique(raj_panch$reservation_2020)
# Load libs
library(readr)
library(dplyr)
library(xtable)
library(fuzzyjoin)
library(stringr)
library(here)
library(kableExtra)
# Load data
data_dir <- here("..", "data/sarpanch_election_data")
sp_fin_file <- here(data_dir, "sp_2005_2010_2015_2020_fin.csv")
raj_panch <- readr::read_csv(sp_fin_file)
tables_folder <- here("tables")
# Transition Matrces ------------------------------------------------------
trans_05_10 <- table(raj_panch$reservation_2005, raj_panch$reservation_2010)
trans_10_15 <- table(raj_panch$reservation_2010, raj_panch$reservation_2015)
trans_15_20 <- table(raj_panch$reservation_2015, raj_panch$reservation_2020)
# blank dataframe to store results
trans_matrices_store <- data.frame(
"Year Comparison" = c("2005-2010", "2010-2015", "2015-2020"),
"Transition Matrix" = c(
kable(trans_05_10, format = "latex", escape = FALSE, booktabs = TRUE),
kable(trans_10_15, format = "latex", escape = FALSE, booktabs = TRUE),
kable(trans_15_20, format = "latex", escape = FALSE, booktabs = TRUE)
)
)
# TeX export Beautify this later
trans_matrices_table <- trans_matrices_store %>%
kable("latex", escape = FALSE, booktabs = TRUE, caption = "Transition Matrices")
cat(trans_matrices_table, file = here("tables", "tran_matrices.tex"))
# Chi-Squared Test --------------------------------------------------------
chi_sq_test_05_10 <- chisq.test(trans_05_10, simulate.p.value = TRUE)
chi_sq_test_10_15 <- chisq.test(trans_10_15, simulate.p.value = TRUE)
chi_sq_test_15_20 <- chisq.test(trans_15_20, simulate.p.value = TRUE)
# blank dataframe to store results
results_store <- data.frame(
"Year Comparison" = c("2005-2010", "2010-2015", "2015-2020"),
"Chi-Squared Test Result" = c(
format(chi_sq_test_05_10$p.value, scientific = TRUE, digits = 2),
format(chi_sq_test_10_15$p.value, scientific = TRUE, digits = 2),
format(chi_sq_test_15_20$p.value, scientific = TRUE, digits = 2)
)
)
#teX export Beautify this later
chisq_table <- results_store %>%
kable("latex", escape = FALSE, booktabs = TRUE, caption = "Chi-Squared Test Results") %>%
kable_styling(full_width = FALSE, position = "center")
cat(chisq_table, file = here("tables", "chisq_table.tex"))
# Regressions -------------------------------------------------------------
# create reservation dummies
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2005 <- ifelse((raj_panch$reservation_2005 == "GEN W" |
raj_panch$reservation_2005 == "OBC W" |
raj_panch$reservation_2005 == "SC W" |
raj_panch$reservation_2005 == "ST W"),1,0))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2010 <- ifelse((raj_panch$reservation_2010 == "GENW" |
raj_panch$reservation_2010 == "OBCW" |
raj_panch$reservation_2010 == "SCW" |
raj_panch$reservation_2010 == "STW"),1,0))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2015 <- ifelse((raj_panch$reservation_2015 == "General (Woman)" |
raj_panch$reservation_2015 == "OBC (Woman)" |
raj_panch$reservation_2015 == "SC (Woman)" |
raj_panch$reservation_2015 == "ST (Woman)"),1,0))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2020 <- ifelse((raj_panch$reservation_2020 == "General (Woman)" |
raj_panch$reservation_2020 == "OBC (Woman)" |
raj_panch$reservation_2020 == "SC (Woman)" |
raj_panch$reservation_2020 == "ST (Woman)"),1,0))
test <- test %>% select(reservation_2005,treat_05, reservation_2010,treat_10, reservation_2015,treat_15, reservation_2020,treat_20)
test <- raj_panch %>% select(reservation_2005,treat_05, reservation_2010,treat_10, reservation_2015,treat_15, reservation_2020,treat_20)
test <- raj_panch %>% select(reservation_2005,treat_2005, reservation_2010,treat_2010, reservation_2015,treat_2015, reservation_2020,treat_2020)
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2005 <- ifelse((raj_panch$reservation_2005 == "GEN W" |
raj_panch$reservation_2005 == "OBC W" |
raj_panch$reservation_2005 == "SC W" |
raj_panch$reservation_2005 == "ST W"),1,0))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2010 <- ifelse((raj_panch$reservation_2010 == "GENW" |
raj_panch$reservation_2010 == "OBCW" |
raj_panch$reservation_2010 == "SCW" |
raj_panch$reservation_2010 == "STW"),1,0))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2015 <- ifelse((raj_panch$reservation_2015 == "General (Woman)" |
raj_panch$reservation_2015 == "OBC (Woman)" |
raj_panch$reservation_2015 == "SC (Woman)" |
raj_panch$reservation_2015 == "ST (Woman)"),1,0))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2020 <- ifelse((raj_panch$reservation_2020 == "General (Woman)" |
raj_panch$reservation_2020 == "OBC (Woman)" |
raj_panch$reservation_2020 == "SC (Woman)" |
raj_panch$reservation_2020 == "ST (Woman)"),1,0))
test <- raj_panch %>% select(reservation_2005,treat_2005, reservation_2010,treat_2010, reservation_2015,treat_2015, reservation_2020,treat_2020)
names(raj_panch)
View(raj_panch)
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2005 <- ifelse((raj_panch$reservation_2005 == "GEN W" |
raj_panch$reservation_2005 == "OBC W" |
raj_panch$reservation_2005 == "SC W" |
raj_panch$reservation_2005 == "ST W"),1,0))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2005 = ifelse(
raj_panch$reservation_2005 %in% c("GEN W", "OBC W", "SC W", "ST W"), 1, 0
))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2015 = ifelse(
raj_panch$reservation_2015 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0
))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2010 = ifelse(
raj_panch$reservation_2010 %in% c("GENW", "OBCW", "SCW", "STW"), 1, 0
))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2015 = ifelse(
raj_panch$reservation_2015 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0
))
raj_panch <- raj_panch %>%
dplyr::mutate(treat_2020 = ifelse(
raj_panch$reservation_2020 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0
))
test <- raj_panch %>% select(reservation_2005, treat_2005, reservation_2010,treat_2010, reservation_2015,treat_2015, reservation_2020,treat_2020)
View(test)
View(test)
# Load libs
library(readr)
library(dplyr)
library(xtable)
library(fuzzyjoin)
library(stringr)
library(here)
library(kableExtra)
# Load data
data_dir <- here("..", "data/sarpanch_election_data")
sp_fin_file <- here(data_dir, "sp_2005_2010_2015_2020_fin.csv")
raj_panch <- readr::read_csv(sp_fin_file)
tables_folder <- here("tables")
names(raj_punch)
names(raj_panch)
m_05_10_fe <- lm((sex_2010 =="F") ~ treat_2005 + factor(dist_name_2015), data = raj_panch)
m_05_10_fe
# inefficient but does the job
raj_panch <- raj_panch %>%
mutate(
treat_2005 = ifelse(raj_panch$reservation_2005 %in% c("GEN W", "OBC W", "SC W", "ST W"), 1, 0),
treat_2010 = ifelse(raj_panch$reservation_2010 %in% c("GENW", "OBCW", "SCW", "STW"), 1, 0),
treat_2015 = ifelse(raj_panch$reservation_2015 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
treat_2020 = ifelse(raj_panch$reservation_2020 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
obc_2005 = ifelse(raj_panch$reservation_2005 %in% c("OBC W"), 1, 0),
obc_2010 = ifelse(raj_panch$reservation_2010 %in% c("OBCW"), 1, 0),
obc_2015 = ifelse(raj_panch$reservation_2015 %in% c("OBC (Woman)"), 1, 0),
obc_2020 = ifelse(raj_panch$reservation_2020 %in% c("OBC (Woman)"), 1, 0),
dalit_2005 = ifelse(raj_panch$reservation_2005 %in% c("SC W", "ST W"), 1, 0),
dalit_2010 = ifelse(raj_panch$reservation_2010 %in% c("SCW", "STW"), 1, 0),
dalit_2015 = ifelse(raj_panch$reservation_2015 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
dalit_2020 = ifelse(raj_panch$reservation_2020 %in% c("SC (Woman)", "ST (Woman)"), 1, 0)
)
summary(lm((sex_2010 =="F") ~ treat_2005 + factor(dist_name_2015), data = raj_panch))
summary(lm((sex_2010 =="F") ~ treat_2005 + factor(samiti_name_2015), data = raj_panch))
m_05_10_fe <- summary(lm((sex_2010 =="F") ~ treat_2005 + factor(dist_name_2015) + factor(samiti_name_2015), data = raj_panch))
summary(lm((sex_2010 =="F") ~ treat_2005 + factor(dist_name_2015) + factor(samiti_name_2015), data = raj_panch))
m_05_10_fe <- summary(lm((sex_2010 =="F") ~ treat_2005 + factor(gp_name_2010), data = raj_panch))
summary(lm((sex_2010 =="F") ~ treat_2005 + factor(gp_2010), data = raj_panch))
7.892e-02
names(raj_panch)
unique(raj_panch$sex_2010)
unique(raj_panch$sex_2015)
View(raj_panch)
m_05_10_fe <- summary(lm((sex_2010 =="F") ~ treat_2005 + factor(gp_2010), data = raj_panch))
View(raj_panch)
m_05_10_fe
# inefficient but does the job
raj_panch <- raj_panch %>%
mutate(
treat_2005 = ifelse(raj_panch$reservation_2005 %in% c("GEN W", "OBC W", "SC W", "ST W"), 1, 0),
treat_2010 = ifelse(raj_panch$reservation_2010 %in% c("GENW", "OBCW", "SCW", "STW"), 1, 0),
treat_2015 = ifelse(raj_panch$reservation_2015 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
treat_2020 = ifelse(raj_panch$reservation_2020 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
obc_2005 = ifelse(raj_panch$reservation_2005 %in% c("OBC W"), 1, 0),
obc_2010 = ifelse(raj_panch$reservation_2010 %in% c("OBCW"), 1, 0),
obc_2015 = ifelse(raj_panch$reservation_2015 %in% c("OBC (Woman)"), 1, 0),
obc_2020 = ifelse(raj_panch$reservation_2020 %in% c("OBC (Woman)"), 1, 0),
dalit_2005 = ifelse(raj_panch$reservation_2005 %in% c("SC W", "ST W"), 1, 0),
dalit_2010 = ifelse(raj_panch$reservation_2010 %in% c("SCW", "STW"), 1, 0),
dalit_2015 = ifelse(raj_panch$reservation_2015 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
dalit_2020 = ifelse(raj_panch$reservation_2020 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
always_treated = ifelse(treat_2005 + treat_2010 + treat_2015 == 3, 1, 0),
never_treated = ifelse(treat_2005 + treat_2010 + treat_2015 == 0, 1, 0),
sometimes_treated = ifelse(treat_2005 + treat_2010 + treat_2015 > 0, 1, 0)
)
summary(raj_panch$sometimes_treated)
summary(raj_panch$sometimes_treated)
table(raj_panch$sometimes_treated)
table(raj_panch$sometimes_treated)
table(raj_panch$always_treated)
table(raj_panch$never_treated)
# inefficient but does the job
raj_panch <- raj_panch %>%
mutate(
treat_2005 = ifelse(raj_panch$reservation_2005 %in% c("GEN W", "OBC W", "SC W", "ST W"), 1, 0),
treat_2010 = ifelse(raj_panch$reservation_2010 %in% c("GENW", "OBCW", "SCW", "STW"), 1, 0),
treat_2015 = ifelse(raj_panch$reservation_2015 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
treat_2020 = ifelse(raj_panch$reservation_2020 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
obc_2005 = ifelse(raj_panch$reservation_2005 %in% c("OBC W"), 1, 0),
obc_2010 = ifelse(raj_panch$reservation_2010 %in% c("OBCW"), 1, 0),
obc_2015 = ifelse(raj_panch$reservation_2015 %in% c("OBC (Woman)"), 1, 0),
obc_2020 = ifelse(raj_panch$reservation_2020 %in% c("OBC (Woman)"), 1, 0),
dalit_2005 = ifelse(raj_panch$reservation_2005 %in% c("SC W", "ST W"), 1, 0),
dalit_2010 = ifelse(raj_panch$reservation_2010 %in% c("SCW", "STW"), 1, 0),
dalit_2015 = ifelse(raj_panch$reservation_2015 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
dalit_2020 = ifelse(raj_panch$reservation_2020 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
always_treated = ifelse(treat_2005 + treat_2010 + treat_2015 == 3, 1, 0),
never_treated = ifelse(treat_2005 + treat_2010 + treat_2015 == 0, 1, 0),
sometimes_treated = ifelse(treat_2005 + treat_2010 + treat_2015 > 0, 1, 0),
treatment_intensity = treat_2005 + treat_2010 + treat_2015
)
table(raj_panch$treatment_intensity)
lm((raj_panch$sex_2010 =="F") ~ treat_2005, data = raj_panch)
lm((sex_2010 =="F") ~ treat_2005 + factor(gp_2010), data = raj_panch)
test <- raj_panch %>% select(gp_2005,gp_2010,gp_2015,gp_2020,treat_2005,treat_2010,treat_2015,treat_2020)
head(test)
trans_05_15 <- table(raj_panch$reservation_2005, raj_panch$reservation_2015)
chi_sq_test_05_15 <- chisq.test(trans_05_15, simulate.p.value = TRUE)
chi_sq_test_05_15
chisq.test(trans_05_10, simulate.p.value = TRUE)
# Load libs
library(readr)
library(dplyr)
library(xtable)
library(fuzzyjoin)
library(stringr)
library(here)
library(kableExtra)
# Load data
data_dir <- here("..", "data/sarpanch_election_data")
sp_fin_file <- here(data_dir, "sp_2005_2010_2015_2020_fin.csv")
raj_panch <- readr::read_csv(sp_fin_file)
tables_folder <- here("tables")
# Transition Matrces ------------------------------------------------------
trans_05_10 <- table(raj_panch$reservation_2005, raj_panch$reservation_2010)
trans_10_15 <- table(raj_panch$reservation_2010, raj_panch$reservation_2015)
trans_15_20 <- table(raj_panch$reservation_2015, raj_panch$reservation_2020)
trans_05_15 <- table(raj_panch$reservation_2005, raj_panch$reservation_2015)
# blank dataframe to store results
trans_matrices_store <- data.frame(
"Year Comparison" = c("2005-2010", "2010-2015", "2015-2020"),
"Transition Matrix" = c(
kable(trans_05_10, format = "latex", escape = FALSE, booktabs = TRUE),
kable(trans_10_15, format = "latex", escape = FALSE, booktabs = TRUE),
kable(trans_15_20, format = "latex", escape = FALSE, booktabs = TRUE)
)
)
# TeX export Beautify this later
trans_matrices_table <- trans_matrices_store %>%
kable("latex", escape = FALSE, booktabs = TRUE, caption = "Transition Matrices")
cat(trans_matrices_table, file = here("tables", "tran_matrices.tex"))
chisq.test(trans_05_10, simulate.p.value = TRUE)
chisq.test(trans_10_15, simulate.p.value = TRUE)
trans_05_10 <- table(raj_panch$reservation_2005, raj_panch$reservation_2010)
trans_10_15 <- table(raj_panch$reservation_2010, raj_panch$reservation_2015)
trans_15_20 <- table(raj_panch$reservation_2015, raj_panch$reservation_2020)
trans_05_15 <- table(raj_panch$reservation_2005, raj_panch$reservation_2015)
trans_05_20 <- table(raj_panch$reservation_2005, raj_panch$reservation_2020)
chi_sq_test_05_20 <- chisq.test(trans_05_20, simulate.p.value = TRUE)
chi_sq_test_05_20
chi_sq_test_05_10 <- chisq.test(trans_05_10, simulate.p.value = TRUE, B= 10000)
chisq.test(trans_05_10, simulate.p.value = TRUE, B= 10000)
chisq.test(trans_10_15, simulate.p.value = TRUE, B= 10000)
chisq.test(trans_10_15, simulate.p.value = TRUE, B= 5000)
chisq.test(trans_15_20, simulate.p.value = TRUE, B= 5000)
chisq.test(trans_05_10)
chisq.test(trans_10_15)
table(raj_panch$reservation_2005, raj_panch$reservation_2010)
table(raj_panch$reservation_2005, raj_panch$reservation_2010)
table(raj_panch$treat_2005, raj_panch$treat_2010)
# inefficient but does the job
raj_panch <- raj_panch %>%
mutate(
treat_2005 = ifelse(raj_panch$reservation_2005 %in% c("GEN W", "OBC W", "SC W", "ST W"), 1, 0),
treat_2010 = ifelse(raj_panch$reservation_2010 %in% c("GENW", "OBCW", "SCW", "STW"), 1, 0),
treat_2015 = ifelse(raj_panch$reservation_2015 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
treat_2020 = ifelse(raj_panch$reservation_2020 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
obc_2005 = ifelse(raj_panch$reservation_2005 %in% c("OBC W"), 1, 0),
obc_2010 = ifelse(raj_panch$reservation_2010 %in% c("OBCW"), 1, 0),
obc_2015 = ifelse(raj_panch$reservation_2015 %in% c("OBC (Woman)"), 1, 0),
obc_2020 = ifelse(raj_panch$reservation_2020 %in% c("OBC (Woman)"), 1, 0),
dalit_2005 = ifelse(raj_panch$reservation_2005 %in% c("SC W", "ST W"), 1, 0),
dalit_2010 = ifelse(raj_panch$reservation_2010 %in% c("SCW", "STW"), 1, 0),
dalit_2015 = ifelse(raj_panch$reservation_2015 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
dalit_2020 = ifelse(raj_panch$reservation_2020 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
always_treated = ifelse(treat_2005 + treat_2010 + treat_2015 == 3, 1, 0),
never_treated = ifelse(treat_2005 + treat_2010 + treat_2015 == 0, 1, 0),
sometimes_treated = ifelse(treat_2005 + treat_2010 + treat_2015 > 0, 1, 0),
treatment_intensity = treat_2005 + treat_2010 + treat_2015
)
trans_05_10 <- table(raj_panch$treat_2005, raj_panch$treat_2010)
table(raj_panch$reservation_2005, raj_panch$reservation_2010)
table(raj_panch$treat_2005, raj_panch$treat_2010)
trans_05_10 <- table(raj_panch$treat_2005, raj_panch$treat_2010)
chisq.test(trans_05_10)
table(raj_panch$treat_2010, raj_panch$treat_2015)
trans_10_15 <- table(raj_panch$treat_2010, raj_panch$treat_2015)
chisq.test(trans_10_15)
trans_15_20 <- table(raj_panch$treat_2015, raj_panch$treat_2020)
chi_sq_test_15_20 <- chisq.test(trans_15_20)
chi_sq_test_15_20
chi_sq_test_05_10 <- chisq.test(trans_05_10)
chi_sq_test_05_10
chi_sq_test_10_15 <- chisq.test(trans_10_15)
chi_sq_test_10_15
chi_sq_test_15_20 <- chisq.test(trans_15_20)
chi_sq_test_15_20
unique(raj_panch$reservation_2005)
unique(raj_panch$reservation_2010)
unique(raj_panch$reservation_2015)
table(raj_panch$reservation_2010, raj_panch$reservation_2015)
install.packages("reticulate")
yes
install.packages("reticulate")
package_name <- "naampy"
library(reticulate)
py_install(package_name)
system(paste("pip install", package_name))
pradhan_10_sex <- raj_panch %>%
dplyr::select(key_2010,name_2010)
View(pradhan_10_sex)
pradhan_15_sex <- raj_panch %>%
dplyr::select(key_2015,name_2015)
View(pradhan_15_sex)
summary(lm((sex_2010 =="F") ~ treat_2005 + factor(key_2010), data = raj_panch))
# Load libs
library(readr)
library(dplyr)
library(xtable)
library(fuzzyjoin)
library(stringr)
library(here)
library(kableExtra)
# Load data
data_dir <- here("..", "data/sarpanch_election_data")
sp_fin_file <- here(data_dir, "sp_2005_2010_2015_2020_fin.csv")
raj_panch <- readr::read_csv(sp_fin_file)
tables_folder <- here("tables")
summary(lm((sex_2010 =="F") ~ treat_2005 + factor(key_2010), data = raj_panch))
# inefficient but does the job
raj_panch <- raj_panch %>%
mutate(
treat_2005 = ifelse(raj_panch$reservation_2005 %in% c("GEN W", "OBC W", "SC W", "ST W"), 1, 0),
treat_2010 = ifelse(raj_panch$reservation_2010 %in% c("GENW", "OBCW", "SCW", "STW"), 1, 0),
treat_2015 = ifelse(raj_panch$reservation_2015 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
treat_2020 = ifelse(raj_panch$reservation_2020 %in% c("General (Woman)", "OBC (Woman)", "SC (Woman)", "ST (Woman)"), 1, 0),
obc_2005 = ifelse(raj_panch$reservation_2005 %in% c("OBC W"), 1, 0),
obc_2010 = ifelse(raj_panch$reservation_2010 %in% c("OBCW"), 1, 0),
obc_2015 = ifelse(raj_panch$reservation_2015 %in% c("OBC (Woman)"), 1, 0),
obc_2020 = ifelse(raj_panch$reservation_2020 %in% c("OBC (Woman)"), 1, 0),
dalit_2005 = ifelse(raj_panch$reservation_2005 %in% c("SC W", "ST W"), 1, 0),
dalit_2010 = ifelse(raj_panch$reservation_2010 %in% c("SCW", "STW"), 1, 0),
dalit_2015 = ifelse(raj_panch$reservation_2015 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
dalit_2020 = ifelse(raj_panch$reservation_2020 %in% c("SC (Woman)", "ST (Woman)"), 1, 0),
always_treated = ifelse(treat_2005 + treat_2010 + treat_2015 == 3, 1, 0),
never_treated = ifelse(treat_2005 + treat_2010 + treat_2015 == 0, 1, 0),
sometimes_treated = ifelse(treat_2005 + treat_2010 + treat_2015 > 0, 1, 0),
treatment_intensity = treat_2005 + treat_2010 + treat_2015
)
summary(lm((sex_2010 =="F") ~ treat_2005 + factor(key_2010), data = raj_panch))
summary(lm((sex_2010 =="F") ~ treat_2005 + factor(gp_2010), data = raj_panch))
rm(list=ls())
setwd("/Users/varun/Dropbox/PhD/2YP/Data/data_analysis")
library(haven)
library(stargazer)
library(readstata13)
library(readr)
library(plyr)
library(dplyr)
library(ggplot2)
library(gghighlight)
library(plm)
library(lmtest)
library(multiwayvcov)
library(expss)
library(broom)
library(tidyr)
library(expss)# library(interplot)
final_panel <- read_dta("final_panel.dta")
first_reservation_year <- final_panel %>%
# Convert variable to factor, so we can use complete later. We do this within
# group_by, because we want to operate by level of variable
group_by(state_name=factor(state_name)) %>%
# Remove all rows of variable if there aren't any rows with values==0
filter(any(reservation==0)) %>%
# Remove all rows with values != 0
filter(reservation != 0) %>%
# Keep the first row of each variable, after sorting by Date
# This gives us the first non-zero row
arrange(year_1) %>%
slice(1) %>%
# Use complete to bring back a row for any level of variable that
# didn't start with any rows with values==0
ungroup() %>%
complete(state_name)
proportion_plot <- ggplot(data=final_panel, aes(x=year_1, y=sex_prop, group = state_name)) +
geom_line() +
geom_point( size=1, shape=20, fill="white") +
geom_vline(data = first_reservation_year, aes(xintercept=year_1-1), color="red",
linetype="dashed",size=0.4) +
scale_linetype_discrete(name = "Year of Reservation") +
facet_wrap( "state_name",scales='free_x')+xlab("Election Year") +
ylab("Proportion of Women in state Assembly")+ theme_bw()+
theme(panel.border = element_blank(), panel.grid.major = element_blank(),
strip.background = element_blank(),panel.grid.minor = element_blank(),axis.title=element_text(size=16,face="bold"))
rm(list=ls())
setwd("/Users/varun/Dropbox/PhD/2YP/Data/data_analysis")
library(haven)
library(stargazer)
library(readstata13)
library(readr)
library(plyr)
library(dplyr)
library(ggplot2)
library(gghighlight)
library(plm)
library(lmtest)
library(multiwayvcov)
library(expss)
library(broom)
library(tidyr)
library(expss)# library(interplot)
final_panel <- read_dta("final_panel.dta")
test <- final_panel %>% select(reservation, state_name, year_1)
test <- test %>% group_by(state_name) %>%
mutate(first.treat = case_when(reservation == 1 ~ year_1)) %>%
test <- test %>% mutate(testing = first(na.omit(first.treat)))
